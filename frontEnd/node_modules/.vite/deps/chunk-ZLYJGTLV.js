import {
  isBase64JSON,
  parseBase64String
} from "./chunk-IRLSG7SP.js";
import {
  name,
  symbol
} from "./chunk-6XPCJUIC.js";
import {
  readContract
} from "./chunk-BF6IWIHR.js";

// node_modules/thirdweb/dist/esm/utils/contract/fetchContractMetadata.js
async function fetchContractMetadata(options) {
  const { client, uri } = options;
  if (isBase64JSON(uri)) {
    try {
      return JSON.parse(parseBase64String(uri));
    } catch (e) {
      console.error("Failed to decode base64 encoded contract metadata", { uri }, e);
      return void 0;
    }
  }
  const { download } = await import("./download-FPAFAFID.js");
  return await (await download({ client, uri })).json();
}

// node_modules/thirdweb/dist/esm/extensions/common/__generated__/IContractMetadata/read/contractURI.js
var FN_SELECTOR = "0xe8a3d485";
var FN_INPUTS = [];
var FN_OUTPUTS = [
  {
    type: "string"
  }
];
async function contractURI(options) {
  return readContract({
    contract: options.contract,
    method: [FN_SELECTOR, FN_INPUTS, FN_OUTPUTS],
    params: []
  });
}

// node_modules/thirdweb/dist/esm/extensions/common/read/getContractMetadata.js
async function getContractMetadata(options) {
  const [resolvedMetadata, resolvedName, resolvedSymbol] = await Promise.all([
    contractURI(options).then((uri) => {
      if (uri) {
        return fetchContractMetadata({
          client: options.contract.client,
          uri
        });
      }
      return null;
    }).catch(() => null),
    name(options).catch(() => null),
    symbol(options).catch(() => null)
  ]);
  return {
    ...resolvedMetadata,
    name: (resolvedMetadata == null ? void 0 : resolvedMetadata.name) ?? resolvedName,
    symbol: (resolvedMetadata == null ? void 0 : resolvedMetadata.symbol) ?? resolvedSymbol
  };
}

export {
  getContractMetadata
};
//# sourceMappingURL=chunk-ZLYJGTLV.js.map
